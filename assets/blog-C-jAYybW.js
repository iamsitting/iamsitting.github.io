import{r as s,j as e,L as y}from"./main-QdTQNyMP.js";import{a as E,g as k}from"./api-BeoRhawr.js";import{L as S}from"./Loader-C6bam5P4.js";function F(r,c){const[d,n]=s.useState(r);return s.useEffect(()=>{const l=setTimeout(()=>{n(r)},c);return()=>{clearTimeout(l)}},[r,c]),d}function L(){const[r,c]=s.useState([]),[d,n]=s.useState(!0),[l,u]=s.useState(null),[o,i]=s.useState(1),[h,p]=s.useState(""),g=F(h,300),[x,b]=s.useState(),[C,j]=s.useState([]),[f,A]=s.useState({pageCount:0,total:0}),m=s.useRef(null),N=s.useCallback(t=>{p(t.target.value)},[]),v=s.useCallback(t=>{const a=t.target.value?Number(t.target.value):void 0;b(a),i(1)},[]);return s.useEffect(()=>{(async()=>{try{const a=await E();j(a)}catch(a){console.error("Error fetching categories:",a),u("Failed to load categories")}})()},[]),s.useEffect(()=>{(async()=>{n(!0);try{const a=await k(o,g,x);c(a.posts),A(a.pagination),u(null)}catch(a){console.error("Error fetching posts:",a),u("Failed to load posts")}finally{n(!1)}})()},[o,g,x]),s.useEffect(()=>{i(1)},[g]),s.useEffect(()=>{m.current&&m.current.focus()},[r]),d&&o===1?e.jsx("div",{className:"max-w-screen-lg mx-auto p-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(S,{message:"Fetching blog posts..."})})}):l?e.jsx("div",{className:"text-red-500 text-center",children:l}):e.jsxs("div",{className:"max-w-screen-lg mx-auto p-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-[#E8F5E8] mb-8",children:"Blog Posts"}),e.jsx("div",{className:"mb-8 space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{ref:m,type:"text",placeholder:"Search posts...",value:h,onChange:N,className:"flex-1 px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white"}),e.jsxs("select",{value:x||"",onChange:v,className:"px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),C.map(t=>e.jsx("option",{value:t.documentId,children:t.name},t.documentId))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(t=>e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-[#E8F5E8] mb-2",children:t.title}),e.jsx("div",{className:"text-gray-600 dark:text-[#A3C9A3] mb-4",children:new Date(t.publishedAt).toLocaleDateString()}),e.jsx("p",{className:"text-gray-700 dark:text-[#A3C9A3] mb-4",children:t.description}),e.jsx(y,{to:`/post/${t.slug}`,className:"text-[#4CAF50] hover:text-[#66BB6A] transition-colors",children:"Read more â†’"})]},t.slug))}),e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-gray-600 dark:text-[#A3C9A3]",children:["Page ",o," of ",f.pageCount]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>i(t=>Math.max(1,t-1)),disabled:o===1,className:"btn-secondary disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>i(t=>t+1),disabled:o>=f.pageCount,className:"btn-primary disabled:opacity-50",children:"Next"})]})]})]})}export{L as default};
