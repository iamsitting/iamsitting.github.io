import{r as s,j as e,L as E}from"./main-CKBVFZqR.js";import{a as k,g as S}from"./api-NJ1pvpA0.js";import{L as F}from"./Loader-g7B0ivea.js";function P(r,o){const[d,c]=s.useState(r);return s.useEffect(()=>{const l=setTimeout(()=>{c(r)},o);return()=>{clearTimeout(l)}},[r,o]),d}function I(){const[r,o]=s.useState([]),[d,c]=s.useState(!0),[l,u]=s.useState(null),[n,i]=s.useState(1),[h,b]=s.useState(""),g=P(h,300),[x,j]=s.useState(),[C,A]=s.useState([]),[f,N]=s.useState({pageCount:0,total:0}),m=s.useRef(null),y=s.useCallback(t=>{b(t.target.value)},[]),v=s.useCallback(t=>{const a=t.target.value?Number(t.target.value):void 0;j(a),i(1)},[]);return s.useEffect(()=>{(async()=>{try{const a=await k();A(a)}catch(a){console.error("Error fetching categories:",a),u("Failed to load categories")}})()},[]),s.useEffect(()=>{(async()=>{c(!0);try{const a=await S(n,g,x);o(a.posts),N(a.pagination),u(null)}catch(a){console.error("Error fetching posts:",a),u("Failed to load posts")}finally{c(!1)}})()},[n,g,x]),s.useEffect(()=>{i(1)},[g]),s.useEffect(()=>{m.current&&m.current.focus()},[r]),d&&n===1?e.jsx("div",{className:"max-w-screen-lg mx-auto p-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{message:"Fetching blog posts..."})})}):l?e.jsx("div",{className:"text-red-500 text-center",children:l}):e.jsxs("div",{className:"max-w-screen-lg mx-auto p-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-[#E8F5E8] mb-8",children:"Blog Posts"}),e.jsx("div",{className:"mb-8 space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{ref:m,type:"text",placeholder:"Search posts...",value:h,onChange:y,className:"flex-1 px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white"}),e.jsxs("select",{value:x||"",onChange:v,className:"px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),C.map(t=>e.jsx("option",{value:t.documentId,children:t.name},t.documentId))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(t=>e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-[#E8F5E8] mb-2",children:t.title}),e.jsx("div",{className:"text-gray-600 dark:text-[#A3C9A3] mb-2",children:new Date(t.publishedAt).toLocaleDateString()}),t.categories.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.categories.map(a=>{const p=Array.isArray(a.name)?a.name[0]:a.name;return e.jsx("span",{className:"px-2 py-1 text-sm bg-[#4CAF50] bg-opacity-10 text-gray-900 rounded-full",children:p},p)})}),e.jsx("p",{className:"text-gray-700 dark:text-[#A3C9A3] mb-4",children:t.description}),e.jsx(E,{to:`/post/${t.slug}`,className:"text-[#4CAF50] hover:text-[#66BB6A] transition-colors",children:"Read more â†’"})]},t.slug))}),e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-gray-600 dark:text-[#A3C9A3]",children:["Page ",n," of ",f.pageCount]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>i(t=>Math.max(1,t-1)),disabled:n===1,className:"btn-secondary disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>i(t=>t+1),disabled:n>=f.pageCount,className:"btn-primary disabled:opacity-50",children:"Next"})]})]})]})}export{I as default};
