import{w as E}from"./with-props-DbAwGzOq.js";import{r as s,l as e,L as k}from"./chunk-XJI4KG32-DEfMHIoW.js";import{a as S,g as F}from"./api-BUhJjn81.js";import{L as P}from"./Loader-DhbYeHYs.js";function w(n,o){const[i,d]=s.useState(n);return s.useEffect(()=>{const c=setTimeout(()=>{d(n)},o);return()=>{clearTimeout(c)}},[n,o]),i}function D({}){return[{title:"Blog | iamsitting"},{name:"description",content:"Read the latest articles on iamsitting"}]}const T=E(function(){const[o,i]=s.useState([]),[d,c]=s.useState(!0),[h,u]=s.useState(null),[r,l]=s.useState(1),[f,b]=s.useState(""),g=w(f,300),[x,C]=s.useState(),[j,A]=s.useState([]),[p,N]=s.useState({pageCount:0,total:0}),m=s.useRef(null),v=s.useCallback(t=>{b(t.target.value)},[]),y=s.useCallback(t=>{const a=t.target.value?Number(t.target.value):void 0;C(a),l(1)},[]);return s.useEffect(()=>{(async()=>{try{const a=await S();A(a)}catch(a){console.error("Error fetching categories:",a),u("Failed to load categories")}})()},[]),s.useEffect(()=>{(async()=>{c(!0);try{const a=await F(r,g,x);i(a.posts),N(a.pagination),u(null)}catch(a){console.error("Error fetching posts:",a),u("Failed to load posts")}finally{c(!1)}})()},[r,g,x]),s.useEffect(()=>{l(1)},[g]),s.useEffect(()=>{m.current&&m.current.focus()},[o]),d&&r===1?e.jsx("div",{className:"max-w-screen-lg mx-auto p-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(P,{message:"Fetching blog posts..."})})}):h?e.jsx("div",{className:"text-red-500 text-center",children:h}):e.jsxs("div",{className:"max-w-screen-lg mx-auto p-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-[#E8F5E8] mb-8",children:"Blog Posts"}),e.jsx("div",{className:"mb-8 space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{ref:m,type:"text",placeholder:"Search posts...",value:f,onChange:v,className:"flex-1 px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white"}),e.jsxs("select",{value:x||"",onChange:y,className:"px-4 py-2 border border-[#4CAF50] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#4CAF50] bg-[#E8F5E8] dark:bg-[#1A2A1A] dark:border-[#66BB6A] dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),j.map(t=>e.jsx("option",{value:t.documentId,children:t.name},t.documentId))]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(t=>e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-[#E8F5E8] mb-2",children:t.title}),e.jsx("div",{className:"text-gray-600 dark:text-[#A3C9A3] mb-4",children:new Date(t.publishedAt).toLocaleDateString()}),e.jsx("p",{className:"text-gray-700 dark:text-[#A3C9A3] mb-4",children:t.description}),e.jsx(k,{to:`/post/${t.slug}`,className:"text-[#4CAF50] hover:text-[#66BB6A] transition-colors",children:"Read more â†’"})]},t.slug))}),e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-gray-600 dark:text-[#A3C9A3]",children:["Page ",r," of ",p.pageCount]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>l(t=>Math.max(1,t-1)),disabled:r===1,className:"btn-secondary disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>l(t=>t+1),disabled:r>=p.pageCount,className:"btn-primary disabled:opacity-50",children:"Next"})]})]})]})});export{T as default,D as meta};
